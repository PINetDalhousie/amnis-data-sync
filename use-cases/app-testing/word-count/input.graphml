<?xml version="1.0" encoding="UTF-8"?>
<graphml xmlns="http://graphml.graphdrawing.org/xmlns"  
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns
     http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd">

  <!-- graph attributes -->
  <key id="topicCfg" for="graph" attr.name="topicConfig" attr.type="string"/>
  
  <!-- node attributes -->
  <key id="zk" for="node" attr.name="zookeeper" attr.type="int"/>
  <key id="bk" for="node" attr.name="broker" attr.type="int"/>
  <key id="prodType" for="node" attr.name="producerType" attr.type="string"/>   <!-- producer type can be SFST/MFST -->
  <key id="prodCfg" for="node" attr.name="producerConfig" attr.type="string"/>  <!-- for SFST: one pair of filePath, topicName; for MFMT: multiple pair of filePaths, topicNames; -->
  <key id="consCfg" for="node" attr.name="consumerConfig" attr.type="string"/>  <!-- consConfig will contain the topic name(s) from where the consumer will consumer --> 
  <key id="sparkCfg" for="node" attr.name="sparkConfig" attr.type="string"/>    <!-- sparkConfig will contain the spark application path and topic name(s)/output directory from where the spark ingest its processed output --> 

  <!-- edge attributes -->
  <key id="bw" for="edge" attr.name="bandwidth" attr.type="int"/>  <!-- unit in Mbps -->
  <key id="lat" for="edge" attr.name="latency" attr.type="int"/>   <!-- unit in ms -->
  <key id="st" for="edge" attr.name="sport" attr.type="int"/>
  <key id="dt" for="edge" attr.name="dport" attr.type="int"/>
  
   
  <graph id="simple-topo" edgedefault="undirected">
    <data key="topicCfg">use-cases/app-testing/word-count/topicConfiguration.txt</data>

    <node id="s1"/>

    <node id="h1">
      <data key="prodType">MFST</data>
      <data key="prodCfg">use-cases/app-testing/word-count/inputTopic1/,Greetings,1</data>
      <data key="consCfg">Greetings</data> 
	  </node>            
    
    <node id="h2">
      <data key="zk">1</data>
      <data key="bk">1</data>
      <data key="prodType">MFST</data>
      <data key="prodCfg">use-cases/app-testing/word-count/inputTopic2/,Soccer,1</data>
      <data key="consCfg">Soccer,1</data>  
	  </node>   

    <node id="h3">   
      <data key="sparkCfg">use-cases/app-testing/word-count/sparkApp1.py,outTopic1</data>
      <data key="consCfg">outTopic1,1</data>        
	  </node>

    <node id="h4"> 
      <data key="sparkCfg">use-cases/app-testing/word-count/sparkApp2.py,outTopic2</data>            
      <data key="consCfg">outTopic2,1</data> 
	  </node>         

    <edge source="s1" target="h1">
      <data key="bw">1</data>
      <data key="lat">20</data>
      <data key="st">1</data>
      <data key="dt">1</data>
    </edge>

    <edge source="s1" target="h2">
      <data key="bw">1</data>
      <data key="lat">20</data>
      <data key="st">2</data>
      <data key="dt">1</data>
    </edge>

    <edge source="s1" target="h3">
      <data key="bw">1</data>
      <data key="lat">10</data>
      <data key="st">3</data>
      <data key="dt">1</data>
    </edge>

    <edge source="s1" target="h4">
      <data key="bw">1</data>
      <data key="lat">20</data>
      <data key="st">4</data>
      <data key="dt">1</data>
    </edge>

  </graph>
</graphml>
